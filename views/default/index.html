{{extend 'layout.html'}}

{{block head}}

<style>
    .profile_screen {
        padding: 20px;
        padding-right: 20px;
    }

    .profile_title {
        padding: 0px;
        font-family: sans-serif;
        text-align: center;
    }

    .my_profile {
        border: solid black 1px;
        border-radius: 15px;
        margin-right: 20px;
    }

    .stats {
        padding: 20px !important;
    }

    .stat {
        padding: 5px;
    }

    .profile_goals {
        padding: 20px !important;
    }

    .cur_plan {
        padding: 5px;
        border: solid black 1px;
        border-radius: 5px;
        fill: #26a69a;
    }

    hr {
        display: block;
        height: 1px;
        border: 0;
        border-top: 1px solid #000000;
        margin: 1em 0;
        padding: 0;
    }

    .plan_list_div {
        padding: 20px;
        border: solid black 1px;
        border-radius: 10px;
        margin-top: 20px;
    }

    .my_plans {
        text-align: right;
    }

    .single_plan{
        border: solid black 1px;
        border-radius: 15px;
        margin-right: 20px;
    }

    .button_bar{
        margin-top: 5px;
    }

</style>

<script src="{{=URL('static', 'js/vue.js')}}"></script>
<script>
    var get_profile_url = "{{=URL('api', 'get_profile', user_signature=True)}}";
    var edit_profile_url = "{{=URL('api', 'edit_profile', user_signature=True)}}";
    var add_plan_url = "{{=URL('api', 'add_plan', user_signature=True)}}";
    var get_my_plans_url = "{{=URL('api', 'get_my_plans', user_signature=True)}}";
    var log_in_url = "{{=URL('api', 'log_in')}}";
    var delete_plan_url = "{{=URL('api', 'delete_plan', user_signature=True)}}";
    var view_plan_url = "{{=URL('api', 'view_plan')}}";
    var browse_url = "{{=URL('api', 'browse')}}";
</script>


{{end}}

<div class="main_content">
    <div id="vue-div" class="display:none">
        <div v-if="page=='profile'" class="profile_screen container">
            <div class="my_profile">
                <div class="profile_title"><h2>My Profile</h2></div>
                <hr/>
                <div v-if="profile_loaded" class="info_block container center">
                    <div class="stats half">
                        <div class="stat">
                            Height: <input v-model="user_profile.height" v-on:blur="edit_profile" type="number">
                        </div>
                        <div class="stat">
                            Weight: <input v-model="user_profile.weight" v-on:blur="edit_profile" type="number">
                        </div>
                        <div class="center"><span class="cur_plan center">Current Plan</span></div>
                    </div>
                    <div class="profile_goals half">
                      Goals: ${user_profile.goals}
                    </div>
                </div>
            </div>
            <div class="half padded container">
                <div class="plan_list_div">
                    <div class="container">
                        <div class="my_plans half">
                            <div class="left"><h5>My Plans</h5></div>
                        </div>
                        <div style="padding-top: 12px" class="third right">
                            <button class="btn rounded" v-on:click="adding_plan">New Plan</button>
                        </div>
                    </div>
                    <hr/>
                    <div class="container">
                        <div v-for="plan in my_plans"> <!-- v-for=not now" -->
                            <div class="plan_list">
                                <div class="single_plan plan_description container padded">
                                    <div class="container half">
                                        <h6>${plan.title}</h6>
                                    </div>  
                                    <div class="button_bar container half right">
                                        <div class="padding third">
                                            <button v-on:click="view_plan(plan.id)"><i class="fa fa-eye"></i>View</button>
                                        </div>
                                        <div class="padding third">
                                            <button v-on:click="edit_plan(plan.id)"><i class="fa fa-edit"></i>Edit</button>
                                        </div>
                                        <div class="padding third">
                                            <button v-on:click="delete_plan(plan.id)"><i class="fa fa-trash"></i>Delete</button>
                                        </div>
                                    </div>
                                    <div class="container">${plan.goals}</div>
                                </div>
                                <h6> </h6>    
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            b
            <div class="half padded container">
                <div class="plan_list_div">
                    <div class="container">
                        <div class="my_plans half">
                            <div class="left"><h5>Followed Plans</h5></div>
                        </div>
                        <div style="padding-top: 12px" class="third right">
                            <button v-on:click="browse" class="btn rounded">Browse</button>
                        </div>
                    </div>
                    <hr/>
                    <div class="container">
                        <div v-for="plan in my_plans"> <!-- v-for=not now" -->
                            <div class="plan_list">
                                <div class="single_plan plan_description container padded">
                                    <div class="container twothirds">
                                        <h6>${plan.title}</h6>
                                    </div>  
                                    <div class="button_bar container third right">
                                        <div class="third">
                                            <button v-on:click="view_plan(plan.id)"><i class="fa fa-eye"></i>View</button>
                                        </div>
                                        <div class="third">
                                            <button v-on:click="delete_plan(plan.id)"><i class="fa fa-eye-slash"></i>Unfollow</button>
                                        </div>
                                    </div>
                                    <div class="container">${plan.goals}</div>
                                </div>
                                <h6> </h6>    
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="page == 'adding'" class="container">
            Title
            <input id="title_input" type="text">
            Goals:
            <input id="goals_input" type="text">
            Expected results:
            <input id="results_input" type="text">
            Feedback:
            <input id="feedback_input" type="text">
            <button class="btn rounded" v-on:click="profile">Cancel</button>
            <button class="btn rounded" v-on:click="add_plan">Submit</button>
        </div>

        <div v-if="page == 'editing'" class="container">
            <button class="btn rounded" v-on:click="profile">Cancel</button>
        </div>

        <div v-if="page == 'viewing'" class="container">
            <h3>${open_plan.title}</h3>
            <button class="btn rounded" v-on:click="profile">Exit</button>
        </div>

        <div v-if="page == 'browsing'" class="container">
            <button class="btn rounded" v-on:click="profile">Exit</button>
        </div>

    </div>
</div>
<script src="{{=URL('static', 'js/default_index.js')}}"></script>
